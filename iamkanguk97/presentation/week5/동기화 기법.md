# 동기화 기법

> -   특정 시간에 한 좌석의 기차표는 반드시 하나만 존재한다. 그런데 해당 좌석을 예매하려는 사용자(프로세스)는 여러명이다.
> -   만약 동기화 문제가 발생한다고 가정했을 때, 이 사용자들이 동시에 하나의 좌석 기차표를 구매하려고 하면 하나의 기차표를 여러 사람이 예매하는 이슈가 발생할 수 있다.

즉, **프로세스 동기화는 여러 프로세스가 공유하는 자원의 일관성을 유지하는 것이다.**

## 은행 계좌 예제

```java
class BankAccount {
    public int balance;

    // 입금
    public void deposit(int amount) {
        balance = balance + amount;
    }

    // 출금
    public void withdraw(int amount) {
        balance = balance - amount;
    }

    public int getBalance() {
        return balance;
    }
}

class Parent extends Thread {
    BankAccount b;
    Parent(BankAccount b) {
        this.b = b;
    }

    public void run() {
        for (int i = 0; i < 100; i++) {
            b.deposit(1000);
        }
    }
}

class Child extends Thread {
    BankAccount b;
    Child(BankAccount b) {
        this.b = b;
    }

    public void run() {
        for (int i = 0; i < 100; i++) {
            b.withdraw(1000);
        }
    }
}

class Test {
    public static void main(String[] args) {
        BankAccount b = new BankAccount();
        Parent p = new Parent(b);
        Child c = new Child(b);

        p.start();   // 스레드 실행
        c.start();

        p.join();   // 스레드가 끝나기를 기다리는 메서드
        c.join();

        System.out.println("최종 잔액: " + b.getBalance());
    }
}
```

위의 코드를 실행시키면 당연히 `balance`는 0이 출력되어야 할 것이다.<br/>
매우 간단한 코드이고, 2개의 스레드만 동작하고 있기 때문에 동기화 문제가 발생할 확률은 많이 낮다.<br/>
문제를 확인하기 위해서는 시간 지연을 시켜보도록 하자.

```java

```
