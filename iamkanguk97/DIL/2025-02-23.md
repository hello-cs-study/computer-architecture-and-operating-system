## 페이징의 이점 - 쓰기 시 복사

페이징은 외부 단편화 문제를 해결한다는 점 외에도 **프로세스 간에 페이지를 공유할 수 있다는 장점**이 있다. 대표적인 사례로는 `쓰기 시 복사`가 있다.

유닉스나 리눅스와 같은 운영체제에서 fork 시스템 호출을 하면 부모 프로세스의 복사본이 자식 프로세스로서 만들어진다.

`프로세스 간에는 기본적으로 자원을 공유하지 않는다`는 프로세스의 전통적인 개념에 입각하면, **새롭게 생성된 자식 프로세스의 코드 및 데이터 영역은 부모 프로세스가 적재된 메모리 공간과는 전혀 다른 메모리 공간에 생성된다.**

부모 프로세스의 메모리 영역이 다른 영역에 자식 프로세스로서 복제되고, 각 프로세스의 페이지 테이블은 자신의 고유한 페이지가 할당된 프레임을 가리킨다. 하지만 이 복사 작업은 프로세스 생성 시간을 늦출 뿐만 아니라 불필요한 메모리 낭비를 초래한다.

쓰기 시 복사에서는 부모 프로세스와 동일한 자식 프로세스가 생성되면 자식 프로세스로 하여금 부모 프로세스와 동일한 프레임을 가리키도록 한다.

부모 프로세스 혹은 자식 프로세스 둘 중 하나가 페이지에 쓰기 작업을 하면 그 순간 해당 페이지가 별도의 공간으로 복제된다. 각 프로세스는 자신의 고유한 페이지가 할당된 프레임을 가리킨다.

<br/>

## 계층적 페이징 (다단계 페이지 테이블 기법)

페이지 테이블의 크기는 생각보다 작지 않다. 프로세스의 크기가 커지면 자연히 프로세스 테이블의 크기도 커지기 때문에 프로세스를 이루는 모든 페이지 테이블 엔트리를 메모리에 두는 것은 큰 낭비이다. 그래서, 프로세스를 이루는 모든 페이지 테이블 엔트리를 항상 메모리에 유지하지 않을 수 있는 방법을 `계층적 페이징` 이라고 한다.

**페이지 테이블을 페이징해서 여러 단계의 페이지를 두는 방식이다.** 프로세스 페이지 테이블을 여러 개의 페이지로 자르고, 바깥쪽에 페이지 테이블을 하나 더 두어 잘린 페이지 테이블의 페이지들을 가리키게 하는 방법이다.

즉, 한 프로세스의 페이지 테이블을 여러 개의 페이지로 쪼개고, 페이지들을 가리키는 페이지 테이블(outer page table)을 두는 방식이다.

페이지 테이블을 계층적으로 구성하게 되면 모든 페이지 테이블을 항상 메모리에 유지할 필요가 없다. 몇 개는 보조기억장치에 있어도 무방하고, 추후 해당 페이지 테이블을 참조해야 할 때가 있으면 그 때 메모리에 적재하면 된다.

다만, CPU와 가장 가까이 위치한 페이지 테이블인 Outer 페이지 테이블은 항상 메모리에 유지되어야 한다.

## 14-3) 페이지 교체와 프레임 할당

후반부에 진행

<br/>

## 파일

- 파일은 하드 디스크나 SSD와 같은 보조기억장치에 저장된 관련 정보의 집합
- 파일은 이름과 파일을 실행하기 위한 정보(속성)와 파일 관련 부가 정보(메타데이터)가 있다.

**파일 속성 중 파일 유형은 운영체제가 인식하는 파일 종류이다.** 같은 이름의 파일이라도 텍스트 파일, 실행 파일 등 유형이 다르면 실행 양상도 달라진다. 여기서 확장자의 개념이 사용된다.

**확장자는 파일 종류가 무엇인지 운영체제에게 알려주는 힌트와 같다.**

### 파일 연산을 위한 시스템 호출

파일을 다루는 모든 작업은 운영체제에 의해 이루어진다. **어떤 응용 프로그램도 임의로 파일을 조작할 수 없으며 파일을 다루려면 운영체제에 부탁해야 한다.**

이를 위해 운영체제는 파일 생성,삭제,열기,닫기 등의 작업을 위해서는 `시스템 호출`을 제공한다.

<br/>

## 디렉토리

파일들을 일목요연하게 관리하기 위해 **디렉터리**를 이용할 수 있다. 윈도우 운영체제에서는 디렉터리를 **폴더**라고 부른다.

**트리 구조 디렉터리는 최상위 디렉터리가 있고 그 아래 서브 디렉터리가 있을 수 있다. 최상위 디렉터리는 흔히 루트 디렉터리(/)로 표현된다.** 그리고 윈도우에서는 `C:W`로 표현한다.

### 절대 경로와 상대 경로

- 모든 파일은 루트 디렉터리에서 자기 자신까지 이르는 고유한 경로를 가지고 있다. 이를 `절대 경로` 라고 한다.
- 유닉스, 리눅스, MacOS 등의 운영체제에서 슬래시는 루트 디렉토리를 표시할 뿐만 아니라 디렉터리와 디렉터리 사이의 구분자로도 사용한다.
- 윈도우에서는 \를 사용한다.
- `상대경로`는 현재 디렉터리부터 시작하는 경로이다.
- **즉, 절대 경로는 루트 디렉토리부터, 상대 경로는 현재 디렉토리부터 시작하는 경로.**

### 디렉터리 연산을 위한 시스템 호출

**디렉터리 생성, 삭제 등의 연산도 운영체제는 시스템 호출로 제공을 한다.**
